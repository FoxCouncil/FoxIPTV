<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:FoxIPTV.ViewModels"
        xmlns:views="using:FoxIPTV.Views"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="1280" d:DesignHeight="720"
        x:Class="FoxIPTV.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Icon="/Assets/FoxIPTV.ico"
        Title="{Binding TitleText, FallbackValue=FoxIPTV}"
        Width="1280" Height="720"
        MinWidth="640" MinHeight="400"
        WindowStartupLocation="CenterScreen"
        Background="#121212">

    <Window.Styles>
        <!-- Sidebar: 0 width when closed, 300 when open -->
        <Style Selector="Border.sidebar">
            <Setter Property="Width" Value="0" />
        </Style>
        <Style Selector="Border.sidebar.open">
            <Setter Property="Width" Value="300" />
        </Style>
    </Window.Styles>

    <Panel>
        <!-- Main content: sidebar + video side by side -->
        <Grid ColumnDefinitions="Auto,*">
            <!-- Animated sidebar (pushes video) -->
            <Border Grid.Column="0"
                    Classes="sidebar"
                    Classes.open="{Binding IsChannelListVisible}"
                    ClipToBounds="True"
                    Background="#1a1a1a"
                    BorderBrush="#2a2a2a"
                    BorderThickness="0,0,1,0">
                <Border.Transitions>
                    <Transitions>
                        <DoubleTransition Property="Width"
                                          Duration="0:0:0.2"
                                          Easing="CubicEaseOut" />
                    </Transitions>
                </Border.Transitions>
                <Border Width="300">
                    <views:ChannelListView DataContext="{Binding ChannelList}" />
                </Border>
            </Border>

            <!-- Video player -->
            <views:VideoPlayerView Grid.Column="1"
                                   DataContext="{Binding VideoPlayer}"
                                   x:Name="VideoPlayerView" />
        </Grid>

        <!-- Loading overlay -->
        <Border IsVisible="{Binding IsLoading}"
                Background="#E0121212"
                ZIndex="100">
            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center" Spacing="10">
                <ProgressBar IsIndeterminate="True" Width="200"
                             Foreground="#555555" />
                <TextBlock Text="{Binding StatusMessage}"
                           Foreground="#888888" FontSize="13"
                           HorizontalAlignment="Center" />
            </StackPanel>
        </Border>
    </Panel>
</Window>
